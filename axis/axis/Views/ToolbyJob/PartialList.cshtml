@model IEnumerable<AXIS.Models.AssignmentOfToolsByJob>



    @Html.AntiForgeryToken()
    @Html.Hidden("ContractId", (Int32)ViewBag.ContractId)

 <button id="checar">Save Tools</button>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Manufacturer)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Model)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Serial1)
        </th>
        <th>
            Select
        </th>
    </tr>


    @foreach (var item in Model)
    {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Manufacturer)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Model)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Serial1)
        </td>
       <td>
           @Html.CheckBoxFor(modelItem => item.CheckJob, new { value = item.Id})
           
       </td>
    </tr>
    }
    
</table>



@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
<script src="/Scripts/jquery.min.js"></script>
<script>
    var array = [];

$('#checar').click(function () {
    $('input:checkbox:checked').each(function () {
        array.push($(this).val());
    });

    var url2 = '@Url.Action("Index", "Mobilization")';
    var url = "/ToolbyJob/SaveListA/";
    var anti = $('[name=__RequestVerificationToken]').val();
    var ContractId = $('#ContractId').val();
    
    $.post(url, { ContractId: ContractId, values: array, __RequestVerificationToken: anti }, function (data) {

        if (data = 1) {

            url = "/ATools/EditJson/"
            var PurchaseOrderId = $('#PurchaseOrderId').val();
            var SuppliedBy = $('#SuppliedBy').val();
            var AditionalInfo = $('#AditionalInfo').val();

            $.post(url, { PurchaseOrderId: PurchaseOrderId, SuppliedBy: SuppliedBy, AditionalInfo:AditionalInfo, ContractId: ContractId, values: array, __RequestVerificationToken: anti }, function (data) {

                if (data = 1) {

                    window.location.href = url2;
                }

            });
            alert(data);
        }

    });


});
</script>