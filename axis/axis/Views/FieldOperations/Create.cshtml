@model AXIS.Models.FieldOperations

@{
    ViewBag.Title = "Create";
}

<h2>ASSING TECHNICIAN</h2>


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    @Html.Hidden("ContractId", (Int32)ViewBag.ContractId)
    
    @Html.Hidden("PurchaseOrderId", (Int32)ViewBag.PurchaseOrderId)


    <div class="form-horizontal">
        <h4>FieldOperations</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
       

        <div class="form-group">
            @Html.LabelFor(model => model.TechId, "TECH", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("TechId", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.TechId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.PerDiemAdvance, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EnumDropDownListFor(model => model.PerDiemAdvance, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.PerDiemAdvance, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>
}


<br />
@Html.Action("PartialList", "FieldOperations", new { PurchaseOrderId = @ViewBag.PurchaseOrderId, ContractId = @ViewBag.ContractId })
<br />
<div>
    @Html.ActionLink("Back to List", "Details", "Contracts", new { id = @ViewBag.ContractId }, null)
</div>


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script>
        function confirmDelete(id) {
            bootbox.confirm({
                message: "Are you sure you want to delete this?",
                buttons: {
                    confirm: {
                        label: 'Yes',
                        className: 'btn-success'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-danger'
                    }
                },
                callback: function (result) {

                    if (result) {
                        var url = "/FieldOperations/Delete/";
                        var FOId = id
                        var anti = $('[name=__RequestVerificationToken]').val();

                        $.post(url, { id: FOId, __RequestVerificationToken: anti }, function (data) {



                            $("#FO" + FOId).remove();
                            $("#msg").last().addClass("alert alert-success");
                            $("#msg").html(data);
                        });

                    }
                }
            });


        }

    </script>
}
